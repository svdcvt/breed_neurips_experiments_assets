{
    "server_filename": "$APEBENCH_ROOT/test/common/apebench_server.py",
    "server_class": "APEBenchServer",
    "output_dir": "STUDY_OUT",
    "study_options": {
        "scenario_config": {
            "scenario_name": "apebench.scenarios.difficulty.Advection",
            "stepper_name": "exponax.stepper.Advection",
            "ic_config": "sine;<amp>;<phs>;false;false",
            "network_config": "MLP;64;3;relu",
            "num_spatial_dims": 1,
            "domain_extent": 2.0,
            "num_channels": 1,
            "dt": 0.1,
            "stepper_config": {
                "velocity": 1.0
            },
            "input_fn_config": {}
        },
        "field_names": [
            "preposition",
            "position"
        ],
        "parameter_sweep_size": 200,
        "nb_time_steps": 100,
        "nb_parameters": 2,
        "l_bounds": [-1.0, 0.0],
        "u_bounds": [1.0, "2 * jnp.pi"],
        "seed": 1234,
        "simulation_timeout": 60,
        "crashes_before_redraw": 1,
        "verbosity": 2
    },
    "sampler_type": "uniform",
    "active_sampling_config": {
        "nn_updates": 500,
        "non_resampling_threshold": 10,
        "breed_params": {
            "non_breed_sampling_strategy": "random",
            "sigma": -1.0,
            "start": 0.5,
            "end": 0.9,
            "breakpoint": 3,
            "sliding_window_size": 50
        }
    },
    "dl_config": {
        // "validation_directory": "$ADVECTION_DIR/validation/1Dx160/trajectories",
        "nb_batches_update": 100,
        "batch_size": 128, 
        "per_server_watermark": 800,
        "buffer_size": 1000,
        "buffer": "Reservoir",
        "convert_log_to_df": true
    },
    "launcher_config": {
        "scheduler": "slurm-semiglobal",
        "scheduler_arg_server": [
            "--qos=qos_gpu-dev",
            "--account=igf@v100",
            "--nodes=1",
            "--ntasks=1",
            "--gres=gpu:1",
            "--cpus-per-task=10",
            "--threads-per-core=1",
            "--hint=nomultithread",
            "--time=00:10:00"
        ],
        "scheduler_arg_client": [
            "--account=igf@cpu",
            "--nodes=1",
            "--ntasks=1",
            "--time=00:01:00",
            "--exclusive"
        ],
        "job_limit": 21,
        "server_timeout": 60,
        "timer_delay": 10,
        "fault_tolerance": false,
        "verbosity": 2,
        "std_output": true,
        "http_port": 8888
    },
    "client_config": {
        "executable_command": "$APEBENCH_ROOT/test/common/solver.py",
        "command_default_args": [],
        "preprocessing_commands": [
            "module load zeromq openmpi/4.1.5 python/3.10.4 cudnn/9.2.0.82-cuda",
            "export CONFIG_FILE=$APEBENCH_ROOT/test/advection/config_slurm.json",
            "export JAX_PLATFORMS=cpu"
        ]
    },
    "server_config": {
        "preprocessing_commands": [
            "module load zeromq openmpi/4.1.5 python/3.10.4 cudnn/9.2.0.82-cuda",
            "module load nccl/2.21.5-1-cuda"
        ]
    }
}
